{% extends "base.html" %}
{% block title %}Your Previous Recommendations - Agri Drain{% endblock %}

{% block content %}
<div class="recommendation-page">
  <h2>üìú Your Previous Recommendations</h2>
  <p class="subtitle">Here are all your submitted field details with admin feedback.</p>

  {% if recommendations %}
    <table class="recommendation-table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Soil Type</th>
          <th>Water Level</th>
          <th>Crop</th>
          <th>Admin Recommendation</th>
        </tr>
      </thead>
      <tbody>
        {% for rec in recommendations %}
          <tr>
            <td>{{ rec.created_at.strftime("%d-%m-%Y %I:%M %p") if rec.created_at else "N/A" }}</td>
            <td>{{ rec.soil }}</td>
            <td>{{ rec.water }}</td>
            <td>{{ rec.crop }}</td>
            <td class="{% if rec.recommendation %}has-rec{% else %}no-rec{% endif %}">
              {{ rec.recommendation or "Pending from Admin" }}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="no-data">‚ùå You don‚Äôt have any recommendations yet.</p>
  {% endif %}

  <div class="center-btn">
    <a href="{{ url_for('farmer') }}" class="btn-back">‚¨Ö Back to Dashboard</a>
  </div>
</div>

<style>
.recommendation-page {
  max-width: 950px;
  margin: 40px auto;
  background: #f7fff7;
  padding: 40px;
  border-radius: 20px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
  font-family: "Poppins", sans-serif;
}
h2 {
  text-align: center;
  color: #2e7d32;
  font-size: 1.8em;
}
.subtitle {
  text-align: center;
  color: #555;
  margin-bottom: 25px;
}
.recommendation-table {
  width: 100%;
  border-collapse: collapse;
  text-align: center;
}
.recommendation-table th, .recommendation-table td {
  border: 1px solid #ccc;
  padding: 12px 10px;
}
.recommendation-table th {
  background-color: #2e7d32;
  color: white;
  font-size: 1rem;
}
.recommendation-table tr:nth-child(even) {
  background-color: #f1f8e9;
}
.has-rec {
  color: #1b5e20;
  font-weight: 600;
  background: #e8f5e9;
}
.no-rec {
  color: #b71c1c;
  font-weight: 500;
  background: #ffebee;
}
.no-data {
  text-align: center;
  font-weight: bold;
  color: #666;
  margin-top: 30px;
}
.center-btn {
  text-align: center;
  margin-top: 25px;
}
.btn-back {
  background: #2e7d32;
  color: white;
  padding: 10px 18px;
  border-radius: 10px;
  text-decoration: none;
  font-weight: bold;
  transition: 0.3s;
}
.btn-back:hover {
  background: #1b5e20;
  transform: scale(1.05);
}
</style>
{% endblock %}
